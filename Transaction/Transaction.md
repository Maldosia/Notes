# Transaction

## 1. 数据库本地事务

- 原子性（Actomicity）：如果事务执行失败，需要把数据回滚。利用undo日志实现。

- 持久性（Durability）：事务对数据所做的改变完全保存在数据库，不能因为故障而丢失。利用redo日志实现。

### 1.1 undo log

```shell
#在操作数据前，将数据备份到Undo log，然后进行数据的修改。如果出现了错误或者用户执行了rollback语句，系统可以利用Undo log中的备份数据恢复到事务开始前的状态。
```

### 1.2 redo log

```shell
#与undo log相反，Redo log记录的是新数据的备份。在事务提交前，只要将redo log持久化既可，不需要将数据持久化，减少IO的次数。
```

- 数据库写入数据是随机写，性能很差
- redo log在初始化时，会开辟一块连续的空间，是顺序写，性能很好
- 

## 2. 分布式事务

## 3. BASE理论和CAP理论

## 4. 分布式事务解决方案

### 4.1 SXA

### 4.2 TCC

### 4.3 消息事务

### 4.4 TA

### 4.5 SAGA